{"ast":null,"code":"import { useRef } from \"react\";\nexport function useValidationFunctionAsync(asyncValidator, onAsyncValidation) {\n  var validationMsg = useRef(undefined);\n  var timestampAsyncFunc = useRef(null);\n  var validationFN = useRef(function (value) {\n    var newValue = value === undefined ? \"\" : value;\n    var timestamp = Date.now();\n    timestampAsyncFunc.current = timestamp;\n    onAsyncValidation({\n      status: \"asyncStart\"\n    });\n    return new Promise(function (resolve, reject) {\n      asyncValidator(newValue).then(function (value) {\n        if (timestampAsyncFunc.current === timestamp) {\n          validationMsg.current = value;\n          onAsyncValidation({\n            status: \"asyncSuccess\",\n            value: value\n          });\n          resolve(value);\n        } else {\n          reject(\"cancelled\");\n        }\n      }).catch(function (value) {\n        if (timestampAsyncFunc.current === timestamp) {\n          validationMsg.current = value;\n          onAsyncValidation({\n            status: \"asyncError\",\n            value: value\n          });\n          reject(value);\n        } else {\n          reject(\"cancelled\");\n        }\n      });\n    });\n  });\n  return [validationFN];\n}","map":{"version":3,"sources":["/Users/auttapongkompiban/Spec_mycos/mycos-makub/node_modules/usetheform/build/es/hooks/commons/useValidationFunctionAsync.js"],"names":["useRef","useValidationFunctionAsync","asyncValidator","onAsyncValidation","validationMsg","undefined","timestampAsyncFunc","validationFN","value","newValue","timestamp","Date","now","current","status","Promise","resolve","reject","then","catch"],"mappings":"AAAA,SAASA,MAAT,QAAuB,OAAvB;AACA,OAAO,SAASC,0BAAT,CAAoCC,cAApC,EAAoDC,iBAApD,EAAuE;AAC5E,MAAIC,aAAa,GAAGJ,MAAM,CAACK,SAAD,CAA1B;AACA,MAAIC,kBAAkB,GAAGN,MAAM,CAAC,IAAD,CAA/B;AACA,MAAIO,YAAY,GAAGP,MAAM,CAAC,UAAUQ,KAAV,EAAiB;AACzC,QAAIC,QAAQ,GAAGD,KAAK,KAAKH,SAAV,GAAsB,EAAtB,GAA2BG,KAA1C;AACA,QAAIE,SAAS,GAAGC,IAAI,CAACC,GAAL,EAAhB;AACAN,IAAAA,kBAAkB,CAACO,OAAnB,GAA6BH,SAA7B;AACAP,IAAAA,iBAAiB,CAAC;AAChBW,MAAAA,MAAM,EAAE;AADQ,KAAD,CAAjB;AAGA,WAAO,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmBC,MAAnB,EAA2B;AAC5Cf,MAAAA,cAAc,CAACO,QAAD,CAAd,CAAyBS,IAAzB,CAA8B,UAAUV,KAAV,EAAiB;AAC7C,YAAIF,kBAAkB,CAACO,OAAnB,KAA+BH,SAAnC,EAA8C;AAC5CN,UAAAA,aAAa,CAACS,OAAd,GAAwBL,KAAxB;AACAL,UAAAA,iBAAiB,CAAC;AAChBW,YAAAA,MAAM,EAAE,cADQ;AAEhBN,YAAAA,KAAK,EAAEA;AAFS,WAAD,CAAjB;AAIAQ,UAAAA,OAAO,CAACR,KAAD,CAAP;AACD,SAPD,MAOO;AACLS,UAAAA,MAAM,CAAC,WAAD,CAAN;AACD;AACF,OAXD,EAWGE,KAXH,CAWS,UAAUX,KAAV,EAAiB;AACxB,YAAIF,kBAAkB,CAACO,OAAnB,KAA+BH,SAAnC,EAA8C;AAC5CN,UAAAA,aAAa,CAACS,OAAd,GAAwBL,KAAxB;AACAL,UAAAA,iBAAiB,CAAC;AAChBW,YAAAA,MAAM,EAAE,YADQ;AAEhBN,YAAAA,KAAK,EAAEA;AAFS,WAAD,CAAjB;AAIAS,UAAAA,MAAM,CAACT,KAAD,CAAN;AACD,SAPD,MAOO;AACLS,UAAAA,MAAM,CAAC,WAAD,CAAN;AACD;AACF,OAtBD;AAuBD,KAxBM,CAAP;AAyBD,GAhCwB,CAAzB;AAiCA,SAAO,CAACV,YAAD,CAAP;AACD","sourcesContent":["import { useRef } from \"react\";\nexport function useValidationFunctionAsync(asyncValidator, onAsyncValidation) {\n  var validationMsg = useRef(undefined);\n  var timestampAsyncFunc = useRef(null);\n  var validationFN = useRef(function (value) {\n    var newValue = value === undefined ? \"\" : value;\n    var timestamp = Date.now();\n    timestampAsyncFunc.current = timestamp;\n    onAsyncValidation({\n      status: \"asyncStart\"\n    });\n    return new Promise(function (resolve, reject) {\n      asyncValidator(newValue).then(function (value) {\n        if (timestampAsyncFunc.current === timestamp) {\n          validationMsg.current = value;\n          onAsyncValidation({\n            status: \"asyncSuccess\",\n            value: value\n          });\n          resolve(value);\n        } else {\n          reject(\"cancelled\");\n        }\n      }).catch(function (value) {\n        if (timestampAsyncFunc.current === timestamp) {\n          validationMsg.current = value;\n          onAsyncValidation({\n            status: \"asyncError\",\n            value: value\n          });\n          reject(value);\n        } else {\n          reject(\"cancelled\");\n        }\n      });\n    });\n  });\n  return [validationFN];\n}"]},"metadata":{},"sourceType":"module"}